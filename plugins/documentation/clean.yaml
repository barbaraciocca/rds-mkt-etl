models:
  - name: clean_funnel
    schema: clean
    description: Tabela limpa e tipada do funil de marketing. Pronta para o cálculo de métricas.
    columns:
      - name: id
        data_type: TEXT
        description: ID único da conversão (Chave Primária).
        tests:
          - unique
          - not_null
      - name: email
        data_type: TEXT
        description: E-mail do lead.
      - name: created_month
        data_type: DATE
        description: Mês de criação do registro.
      - name: created_date
        data_type: TIMESTAMP
        description: Data e hora de criação do registro.
      - name: lead_created_month
        data_type: DATE
        description: Mês de criação como Lead.
      - name: lead_created_date
        data_type: TIMESTAMP
        description: Data e hora de criação como Lead.
      - name: mql_created_month
        data_type: DATE
        description: Mês de conversão para MQL.
      - name: mql_created_date
        data_type: TIMESTAMP
        description: Data e hora de conversão para MQL.
      - name: sal_created_month
        data_type: DATE
        description: Mês de conversão para SAL.
      - name: sal_created_date
        data_type: TIMESTAMP
        description: Data e hora de conversão para SAL.
      - name: first_touch_date
        data_type: TIMESTAMP
        description: Data e hora do primeiro ponto de contato.
      - name: last_touch_date
        data_type: TIMESTAMP
        description: Data e hora do último ponto de contato. Campo base para todas as agregações.
        tests:
          - not_null
      - name: account_first_touch
        data_type: TEXT
        description: Conta associada ao primeiro toque.
      - name: account_last_touch
        data_type: TEXT
        description: Conta associada ao último toque (Ex: Brasil).
      - name: channel_first_touch
        data_type: TEXT
        description: Canal de Marketing do primeiro toque.
      - name: channel_last_touch
        data_type: TEXT
        description: Canal de Marketing do último toque.
      - name: campaign_first_touch
        data_type: TEXT
        description: Campanha de Marketing do primeiro toque.
      - name: campaign_last_touch
        data_type: TEXT
        description: Campanha de Marketing do último toque.
      - name: identifier_first_touch
        data_type: TEXT
        description: Identificador da origem no primeiro toque.
      - name: identifier_last_touch
        data_type: TEXT
        description: Identificador da origem no último toque.
      - name: icp_score
        data_type: CHAR(1)
        description: Perfil do Cliente Ideal (A, B, C, D).
        tests:
          - accepted_values: {values: ['A', 'B', 'C', 'D'], strictly: false}
      - name: lead_channel
        data_type: TEXT
        description: Canal de captação do lead.
      - name: lead_type
        data_type: TEXT
        description: Tipo de lead (Ex: MQL, HR).
      - name: country
        data_type: TEXT
        description: País de origem do lead.
      - name: qty_conversions
        data_type: TEXT
        description: Quantidade total de conversões do lead.
      - name: is_new_lead
        data_type: BOOLEAN
        description: Flag indicando se é um lead novo (TRUE/FALSE).
      - name: converted_to_mql
        data_type: BOOLEAN
        description: Flag de conversão para MQL (TRUE/FALSE).
      - name: is_blank_mql
        data_type: BOOLEAN
        description: Flag se MQL é vazio.
      - name: converted_to_sal
        data_type: BOOLEAN
        description: Flag de conversão para SAL (TRUE/FALSE).
      - name: is_a
        data_type: BOOLEAN
        description: Flag para Score A (TRUE/FALSE).
      - name: is_b
        data_type: BOOLEAN
        description: Flag para Score B (TRUE/FALSE).
      - name: is_c
        data_type: BOOLEAN
        description: Flag para Score C (TRUE/FALSE).
      - name: is_d
        data_type: BOOLEAN
        description: Flag para Score D (TRUE/FALSE).
      - name: is_abc
        data_type: BOOLEAN
        description: Flag para Score A, B ou C (TRUE/FALSE).

  - name: clean_metas
    schema: clean
    description: Tabela limpa e tipada das metas mensais, antes da pivotagem.
    columns:
      - name: conta
        data_type: TEXT
        description: Conta alvo da meta (Ex: Brasil).
      - name: canal_mkt
        data_type: TEXT
        description: Canal de Marketing.
      - name: etapa
        data_type: TEXT
        description: Etapa do funil alvo (LEAD, MQL, SAL).
      - name: perfil
        data_type: CHAR(1)
        description: Perfil do ICP alvo (A, B, C, D).
      - name: mes
        data_type: INTEGER
        description: Mês numérico da meta (1 a 12).
      - name: meta
        data_type: INTEGER
        description: Valor da meta mensal.
      - name: data
        data_type: DATE
        description: Data de referência da meta (Dia 1 do mês).